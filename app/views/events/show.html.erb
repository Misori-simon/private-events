<div class="col">
  <div class="content margin8">
    <p>
      <h2><%= @event.description %></h2>
    </p>

    <p>
      <strong>Date:</strong>
      <%= @event.date %>
    </p>

    <p>
      <strong>Creator:</strong>
      <%= @event.creator.name %>
    </p>

    <p>
      <strong>Attendees:</strong>
      <% @event.attendees.each do |attendee| %>
        <% @attending = (attendee.id == session[:user_id]) %>
        <p><%= attendee.name %></p>
      <% end %>
    </p>

    <p>
      <strong>Invitees:</strong>
      <% @event.invitees.each do |invitee| %>
        <p><%= invitee.name %></p>
      <% end %>
    </p>
  </div>

  <% if !@attending && @event.invitees.ids.include?(session[:user_id]) %>
    <div class="row layout-margin8 attend">
      <%= link_to 'Accept Invitation', :controller => 'attendance', :action => 'create', :event => @event, :invitation => @event.invitation.where(invitee_id: session[:user_id], event_id: @event.id).first %>
      <%= link_to 'Decline Invitation', :controller => 'invitation', :action => 'destroy', :event => @event, :id => @event.invitation.where(invitee_id: session[:user_id], event_id: @event.id).first %>
    </div>
  <%end%>

  <% if @event.creator_id == session[:user_id] %>
    <div class="col content margin8 ">
      <strong>Invitations</strong>
      <% @users.each do |user| %>
        <%  unless (user.id == @event.creator_id || @event.attendees.include?(user) || @event.invitees.include?(user))%>
          <div class="row margin8 invitation-item">
            <div class="margin8 row cross-center w-25"> <%= user.name %> </div>
            <%= link_to 'Invite', class: "links margin8", :controller => 'invitation', :action => 'create', :event => @event, :user => user %>
          </div>
        <%  end %>
      <% end %>
    </div>
  <%end%>
</div>
